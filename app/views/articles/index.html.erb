<div class="page-header">
  <%= link_to new_article_path, class: 'btn btn-primary', require_login: true do %>
    <span class="glyphicon glyphicon-plus"></span>
    New Article
  <% end %>
  <h1>Listing articles</h1>
</div>

<div class="table-responsive">
  <table class="table table-striped table-bordered table-hover">
    <thead>
      <tr>
        <th>Title</th>
        <th>Authors</th>
        <th>Body</th>
        <th>Featured</th>
        <th>Readcount</th>
        <th>Rating</th>
        <th>Category</th>
        <th>Edit</th>
        <th>Destroy</th>
      </tr>
    </thead>

    <tbody>
      <%= content_tag_for(:tr, @articles) do |article| %>
        <td><%= link_to article.title, article_path(article) %></td>
        <td><% article.authors.each do |author| %><%= link_to author, author_path(author) %><% end %></td> 
        <td><%= truncate article.body, length: 30, omission: "... (continued)" %></td>
        <td><%= article.featured %></td>
        <td><%= article.readcount %></td>
        <td><%= rating_for article, 'rating', star: 5, disable_after_rate: false %></td>
        <td><% if defined? article.category.category_name %><%= article.category.category_name %><% end %></td>
        <td><%= link_to 'Edit', edit_article_path(article), require_login: true %></td>
        <td><%= link_to 'Destroy', article, method: :delete, data: { confirm: 'Are you sure?' }, require_login: true %></td>
      <% end %>
    </tbody>
  </table>
</div>
